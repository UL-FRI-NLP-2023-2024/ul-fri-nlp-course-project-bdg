[
    {
        "role": "user",
        "message": "hej  mene zanima zakaj omenjena zadeva noče prikazati črte? Ne vem zakaj ne zažene niti \"nit\". Mogoče kdo vidi težavo?  import java.awt.*;\nimport javax.swing.*;\n\npublic class Main {\n\n    public static void main(String[] args) {\n        SwingUtilities.invokeLater(new Runnable()\n                                        {\n                                            public void run() {\n                                                Window window = new Window(\"Thread\");\n                                                JPanel drawPanel = new DrawPanel();\n                                                window.add(drawPanel, BorderLayout.CENTER);\n                                                window.setVisible(true);\n                                            }\n                                        } );\n    }\n\n    private static class DrawPanel extends JPanel{\n        protected void paintComponent(Graphics g){\n            super.paintComponent(g);\n            Thread nit = new Thread(new Threadek(g));\n            nit.start();\n        }\n    }\n\n    private static class Threadek implements Runnable{\n        private Graphics g;\n\n        public Threadek(Graphics g){\n            this.g = g;\n        }\n        \n        public void run(){\n            g.drawLine(10,10,600,100);\n        }\n    }\n\n\n    private static class Window extends JFrame{\n        //konstruktor\n        public Window(String title){\n            setTitle(title);\n            setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n            Toolkit tool = Toolkit.getDefaultToolkit();\n            Dimension d = tool.getScreenSize();\n            int width = d.width;\n            int height = d.height;\n            setSize(3*width/4, 3*height/4);\n            setLocation(width/8, height/8);\n        }\n    }\n}  Hvala za pomoč Lep pozdrav"
    },
    {
        "role": "user",
        "message": "evo najdu rešitev...in mislim, da vem zakaj je prišlo do zapleta      private static class DrawPanel extends JPanel{\n        private Thread nit;\n\n        protected void paintComponent(Graphics g){\n            super.paintComponent(g);\n            nit = new Thread(new Threadek(g));\n            nit.start();\n            try{\n                Thread.sleep(1);\n            } catch(Exception e){}\n        }\n    }  1. inicializiram nitko nit na zacetku, tako, da ni treba vsakic inicializirat... 2. dodam, da se metoda paintComponent izvaja se 1ms vec. Mislim, da je bil problem sledeč. Ob zagonu nitke se je klicala metoda drawLine in pomoje rabi Java nekaj casa da obdela zahtevek. No jaz sem pa metodo zakljucil in posledicno ubil nit se preden je do konca izvedla ukaz drawLine  zdaj dela (ok dobim se dolocene izjeme ampak naceloma dela)"
    },
    {
        "role": "assistant_0",
        "message": "Že nekaj časa nisem delal v swingu, ampak v spominu imam, da je pametno vse gui stvari delati v enem threadu (event dispatch thread) in časovno zahtevne operacije pa v svojih threadih. Za ta namen imaš tudi razred SwingWorker, ki že out of the box podpira omenjen princip.  EDIT: še relevanten del iz javadoca: When writing a multi-threaded application using Swing, there are two constraints to keep in mind: (refer to How to Use Threads for more details):  Time-consuming tasks should not be run on the Event Dispatch Thread. Otherwise the application becomes unresponsive. Swing components should be accessed on the Event Dispatch Thread only."
    },
    {
        "role": "assistant_1",
        "message": "Prvo vprašanje je zakaj bi sploh to delal?  Izriše pa ne zato ker se izris v paintComponent konča preden se konča nit (v tem času se drawLine še ne izvede, tudi lahko pride do nepredvidljivih stvari če \"rišeš\" medtem ko se okno že izrisuje). Thread.sleep v tem primeru dela, ampak če bi se nit izvajala dlje bi bili spet isti problemi  Za to se uporablja Thread.join, tako bo izvajanje metode počakalo da se izvede nit do konca"
    },
    {
        "role": "user",
        "message": "@assistant_0.. vem za EDT...  ja potem če metoda počaka na konec izvajanja niti je isto če bi to izvedel zaporedno... torej nit nima pomena.  bom delal risanje (g.drawLine(..)) v drugi niti kot izris (izris bom pustil v svoji niti)"
    },
    {
        "role": "user",
        "message": "Imam pa na tem mestu novo vprašanje... Kako bi pripel na JPanel MouseMotionListnerja, ki bi se izvajal, delal tudi če bi npr. bila paintComponent zasedena, ker če dam npr. v paintComponent kodo za sleep(5000); mi teh 5s ne dela MouseMotionListener"
    },
    {
        "role": "assistant_1",
        "message": "@user je 14. nov 2010 ob 20:33 izjavil: ja potem če metoda počaka na konec izvajanja niti je isto če bi to izvedel zaporedno... torej nit nima pomena.    Stvar se MORA izvajati zaporedno ...  In še zmeraj nisi odgovoril zakaj bi to sploh delal"
    },
    {
        "role": "assistant_2",
        "message": "Koker sem malo pogledal kodo, se mi zdi, da je napisana mal čudno. Zakaj bi v klasu imel statičen klas, ki deduje od JFrame. \"private static class Window extends JFrame\", če bi lahko od JFrame-a dedoval že v primarnem klasu Main. Potem je mal čudno, da recimo niti ne zaženeš naprimer v konstruktorju. Ni ti treba overridati paintComponent metode, da bi zagnal nit. Ampak dober je, ne bom se delal pametnega, drugač pa če hočete risati v javi, vam zelo priporočam javafx tehnologijo."
    },
    {
        "role": "user",
        "message": "ok kaj hočem narest...  Hočem met JPanel na katerega bi pripel MouseMotionListnerja, ta bi beležil premikanje \"točke\" po JPanel v razred Dimension. Poleg tega hočem imeti v dveh ločenih nitih še metodo za izračun in risanje objekta Graphics, ki na podlagi podatkov razreda Dimension izračunata neke stvari. Sam izris stvari hočem imeti tudi v svoji niti, da ne bi oviral dela MouseMotionListnerja.  Torej  JPanel -> MouseMotionListner -> Dimension -> Izracun -> Izris -< nazaj v JPanel, pri čemer mora MouseMotionListner delovati vedno (ne sme se zogditi, da bi ga npr. paintComponent() zaustavil)  Kako bi se tega lotil?  Lep pozdrav"
    },
    {
        "role": "assistant_2",
        "message": "Jaz ti priporočam, da si pogledaš tehnologijo JavaFX, ker to tam kar ti hočeš narediti, narediš v maksimalno 30 vrsticah kode."
    },
    {
        "role": "user",
        "message": "Samo a ni tko, da Java FX ne podpira večnitnosti?"
    },
    {
        "role": "user",
        "message": "ok ker še vedno iščem rešitev bom povedal kaj delam, da lahko kdo pomaga ce ve..  Delam linearno projekcijo 3D skeleta na 2D(zaslon). V praksi to pomeni 3D grafika (do neke stopnje). Matematična osnova je linearna algebra oz. linearne preslikave (vse že narejeno - 2 matriki + en račun).  Kaj želim? Da bi lahko uporabnik s potegom miške obračal telo. Vsa \"logika\" je že narejena, edino kar mi ne uspe je to, da bi se te premiki miške (draggi) beležili neodvisno od izrisevanja (ne vem kakšno FPS bom dosegel).  Programski jezik je Java. Kakšen nasvet?  Hvala in lep pozdrav"
    },
    {
        "role": "assistant_0",
        "message": "A si pogledal java3d (nekakšen bridge do opengl oz. direct3d)? Verjetno je to primernejše za kompleksno grafiko (vrtenje 3d modelov)."
    },
    {
        "role": "assistant_3",
        "message": "@user je 14. nov 2010 ob 11:49 izjavil: 2. dodam, da se metoda paintComponent izvaja se 1ms vec. Mislim, da je bil problem sledeč. Ob zagonu nitke se je klicala metoda drawLine in pomoje rabi Java nekaj casa da obdela zahtevek. No jaz sem pa metodo zakljucil in posledicno ubil nit se preden je do konca izvedla ukaz drawLine   Niti ne delujejo tako. Ce koncas metodo, kjer si naredil nit, se nit prav nic ne ubije. Aktivne niti se niti ne garbage collectajo.   Mouse listener lahko kar na Jpanelu implementiras in ne rabi svoje niti ker samo spremeni par koordinat oziroma kotov. Lahko imas pa izrisovanje v svojih nitih."
    },
    {
        "role": "user",
        "message": "hej   @assistant_0 hočem narediti iz nule, ampaak se mi ustavi pri nitih oz. pri JPanel @assistant_3 kako bi to naredil..mi ne rata nikakor bi mi lahko kdo dodal v program metodo za izris, ki bi tekla v svoji niti, ker mi je nikakor ne rata sprogramirati.  package grafikek;\n\nimport java.awt.*;\nimport java.awt.event.MouseEvent;\nimport java.awt.event.MouseMotionListener;\nimport javax.swing.*;\n\npublic class Main{\n\n    public static void main(String[] args) {\n        SwingUtilities.invokeLater(new Runnable()\n                                        {\n                                            public void run() {\n                                                Window window = new Window(\"Thread\");\n                                                JPanel drawPanel = new DrawPanel();\n                                                window.add(drawPanel, BorderLayout.CENTER);\n                                                window.setVisible(true);\n                                            }\n                                        } );\n    }\n\n    private static class DrawPanel extends JPanel implements MouseMotionListener{\n        private Dimension dim;\n\n        public DrawPanel(){\n            super();\n            dim = new Dimension(0, 0);\n            this.addMouseMotionListener(this);\n        }\n        \n        public void mouseDragged(MouseEvent e) {\n        }\n\n        public void mouseMoved(MouseEvent e) {\n            changeDimension(new Dimension(e.getX(), e.getY()));\n        }\n\n        private void changeDimension(Dimension dime){\n            if(!dim.equals(dime)){\n                dim.setSize(dime.getHeight(), dime.getWidth());\n                System.out.println(\"Dimension changed to \" + dim.getHeight() + \", \" + dim.getWidth());\n            }\n        }\n    }\n\n    private static class Window extends JFrame{\n        //konstruktor\n        public Window(String title){\n            setTitle(title);\n            setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n            Toolkit tool = Toolkit.getDefaultToolkit();\n            Dimension d = tool.getScreenSize();\n            int width = d.width;\n            int height = d.height;\n            setSize(3*width/4, 3*height/4);\n            setLocation(width/8, height/8);\n        }\n    }\n}\n  help  in lp"
    }
]